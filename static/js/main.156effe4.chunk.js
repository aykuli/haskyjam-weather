(this["webpackJsonphaskyjam-weather"]=this["webpackJsonphaskyjam-weather"]||[]).push([[0],{100:function(e,t,a){e.exports=a(116)},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),i=a.n(o),c=a(16),l=a(22),u=a(175),s=a(176),m=a(177),d=a(155),p=a(89),f=a(181),h=(a(109),Object(p.a)({palette:{type:"light",primary:{main:"#4ed6b8",contrastText:"#ffffff"},secondary:{main:"#ffffff",contrastText:"#3d4451"},text:{primary:"#3d4451",secondary:"#ffffff"},background:{default:"#ffffff"}},typography:{fontFamily:"Ubuntu Condensed",fontSize:16,h1:{fontSize:"3.5rem",lineHeight:"1.2",fontWeight:"bold",color:"#3d4451",margin:"10px 0 30px"},h2:{fontSize:"2rem",lineHeight:"1.2",fontWeight:"bold",color:"#3d4451",margin:"20px 0 20px"},h3:{fontSize:"1.6rem",lineHeight:"1.2",fontWeight:"bold",color:"#3d4451",padding:"5px 0 5px"},h6:{fontSize:"1.2rem",lineHeight:"1.2",fontWeight:"bold",color:"#3d4451",margin:"10px 0 10px"},body1:{fontSize:"1.6rem",lineHeight:"1.6",color:"#ffffff"},body2:{fontSize:"1.6rem",lineHeight:"1.4",color:"#3d4451",padding:"5px 0 5px"},button:{fontSize:"1rem",lineHeight:"1.4",color:"#403d51"},caption:{fontSize:"1.2rem",lineHeight:"1",color:"#000000"}},spacing:function(e){return"".concat(.25*e,"rem")},overrides:{MuiCssBaseline:{"@global":{"@font-face":[{fontFamily:"Ubuntu Condensed",fontStyle:"normal",fontWeight:"400"}]}},MuiInput:{underline:{"&&&&:hover:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)"}}}}})),g=Object(f.a)(h),y=a(27),b=a.n(y),E=a(36),v="08e88a2c40fb4a34966ad1a41752ff28",C=function(){var e=Object(E.a)(b.a.mark((function e(){var t,a,n,r,o,i,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ipinfo.io?token=".concat("abb04b3b63728f"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.city,r=a.country,o=a.loc.split(","),i=Object(l.a)(o,2),c=i[0],u=i[1],e.abrupt("return",{latitude:Number(c),longitude:Number(u),city:n,country:r});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(E.a)(b.a.mark((function e(t,a,n){var r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"si",r="https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/".concat("eefc04453f3143682c3c88d3669c3546","/").concat(t,",").concat(a,"?lang=").concat(n,"&units=").concat("si"),e.next=4,fetch(r);case 4:return o=e.sent,e.next=7,o.json();case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),w=function(e){return"-0"===e.toString()?0:e},O=function(e){return Number(e.toFixed(0))},T=function(e){return{type:"REFRESH_COORDINATES",coordinates:{latitude:e.latitude,longitude:e.longitude}}},j=function(e){return{type:"ADD_CITY_TO_HISTORY",history:e}};function k(){return(k=Object(E.a)(b.a.mark((function e(t){var a,n,r,o,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"ru",n="https://api.opencagedata.com/geocode/v1/json?q=".concat(t,"&countrycode=").concat(a,"&key=").concat(v,"&language=").concat(a,"&pretty=1&no_annotations=1"),r={"Content-Type":"application/json"},e.next=5,fetch(n,r);case 5:return o=e.sent,e.abrupt("return",o.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(E.a)(b.a.mark((function e(t,a){var n,r,o,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"ru",r="https://api.opencagedata.com/geocode/v1/json?q=".concat(t,"%2C").concat(a,"&key=").concat(v,"&language=").concat(n,"&pretty=1"),e.next=4,fetch(r);case 4:return o=e.sent,e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=a(17),S=a(79),H=a(157),_=a(117),A=a(80),R=a.n(A),W=a(182),D=a(13),L=["\u0418\u0421\u0422\u041e\u0420\u0418\u042f","\u0421\u0415\u0413\u041e\u0414\u041d\u042f","\u0417\u0410\u0412\u0422\u0420\u0410","\u041d\u0415\u0414\u0415\u041b\u042f"],Y=Object(d.a)((function(e){var t;return Object(W.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",backgroundColor:e.palette.primary.main,padding:"10px 40px"},activeTab:{backgroundColor:e.palette.primary.dark},btnGroup:Object(I.a)({},"@media (max-width: 624px)",{marginBottom:20,margin:"auto"}),search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(D.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(D.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},Object(I.a)(t,e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),Object(I.a)(t,"@media (max-width: 624px)",{marginBottom:10}),t),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",top:0,left:-40,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{minWidth:250,width:"100%",color:e.palette.text.primary}})})),z={changeCurrentTab:function(e){return{type:"CHANGE_CURRENT_TAB",currentTab:e}},setCoordinates:function(e){return T(e)}},F=Object(c.b)((function(e){return{currentTab:e.currentTab}}),z)((function(e){var t=e.changeCurrentTab,a=e.currentTab,n=e.setCoordinates,o=Y(),i=function(e){var a=e.target.innerText;t(a)};return r.a.createElement("div",{className:o.root},r.a.createElement(H.a,{size:"large",color:"secondary","aria-label":"wheather for today, tomorrow or for week",className:o.btnGroup},L.map((function(e){return r.a.createElement(_.a,{key:e,onClick:i,className:e===a?o.activeTab:""},e)}))),r.a.createElement("div",{className:o.search},r.a.createElement("div",{className:o.searchIcon},r.a.createElement(R.a,{color:"secondary"})),r.a.createElement("div",{className:o.inputRoot},r.a.createElement(S.ReactDadata,{token:"41abac0b9197748c810ee5b27d23d04998ecc55b",query:"",autoload:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430",onChange:function(e){console.log("e: ",e);var t=e.data,a=t.city,r=t.settlement,o=t.area;(function(e){return k.apply(this,arguments)})(a||(r||o)).then((function(e){var t=e.results[0].geometry;n({latitude:t.lat,longitude:t.lng})}))}}))))})),B=a(159),G=a(183),M=a(162),U=a(83),P=a.n(U),X=a(81),J=a.n(X),q=function(){for(var e="#",t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},K=Object(d.a)((function(e){return{main:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:20,boxShadow:e.shadows[1]},addCity:{position:"absolute",zIndex:1,top:10,right:10}}})),V={setNewCityToHistory:function(e){return j(e)}},Q=Object(c.b)((function(e){return{city:e.city,country:e.country,temperature:e.temperature,weatherInfo:e.weatherInfo,coordinates:e.coordinates}}),V)((function(e){var t=e.temperature,a=e.city,n=e.country,o=e.weatherInfo,i=e.coordinates,c=e.setNewCityToHistory,l=J()("en-EN"),u=K(),s=function(e){var t=new Date;return new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(t)}("ru");return r.a.createElement("div",{className:u.main},r.a.createElement(B.a,{variant:"h1",component:"p"},"".concat(t," \xb0C")),r.a.createElement(B.a,{variant:"body2",component:"p"},a?"".concat(a,", "):"",n?"".concat(n):""),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{variant:"body2",component:"p"},s),r.a.createElement(B.a,{variant:"caption",component:"p"},o)),r.a.createElement(G.a,{title:"Add place to history","aria-label":"Add place to history"},r.a.createElement(M.a,{color:"primary",className:u.addCity,onClick:function(){var e=l.random.masked("aaa-AAA_999999:*"),t=q();c({id:e,city:a,coordinates:i,color:t})}},r.a.createElement(P.a,null))))})),Z=a(171),$=a(172),ee=a(173),te=a(179),ae=a(51),ne=a.n(ae),re=a(180),oe=a(184),ie=a(167),ce=a(169),le=a(170),ue=a(165),se=a(168),me=a(163),de=a(178),pe=a(164),fe=a(166),he=a(118),ge=[{id:"city",numeric:!1,label:"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442"},{id:"latitude",numeric:!0,label:"\u0428\u0438\u0440\u0438\u043d\u0430"},{id:"longitude",numeric:!0,label:"\u0414\u043e\u043b\u0433\u043e\u0442\u0430"}],ye=function(){return r.a.createElement(me.a,null,r.a.createElement(pe.a,null,ge.map((function(e){return r.a.createElement(ue.a,{key:e.id,align:e.numeric?"right":"left"}," ",e.label)}))))},be=Object(d.a)((function(e){return Object(W.a)({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(D.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}})})),Ee=function(e){var t=e.setEmptyHistory,a=be();return r.a.createElement(fe.a,{className:a.highlight},r.a.createElement(B.a,{className:a.title,variant:"h6",id:"tableTitle",component:"div"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),r.a.createElement(G.a,{title:"Clear history"},r.a.createElement(ie.a,{"aria-label":"delete",onClick:function(){return t()}},r.a.createElement(ne.a,null))))},ve=Object(d.a)((function(){return Object(W.a)({root:{width:"100%"},paper:{width:"100%",padding:"20px 0 40px"},table:{padding:20},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})})),Ce={setEmptyHistory:function(){return{type:"CLEAR_HISTORY",history:[]}}},xe=Object(c.b)((function(e){return{history:e.history}}),Ce)((function(e){var t=e.history,a=e.setEmptyHistory,n=t.slice().reverse(),o=ve(),i=r.a.useState(0),c=Object(l.a)(i,2),u=c[0],s=c[1],m=r.a.useState(5),d=Object(l.a)(m,2),p=d[0],f=d[1],h=p-Math.min(p,n.length-u*p);return r.a.createElement("div",{className:o.root},r.a.createElement(he.a,{className:o.paper},r.a.createElement(Ee,{setEmptyHistory:a}),r.a.createElement(se.a,null,r.a.createElement(ce.a,{className:o.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(ye,null),r.a.createElement(le.a,null,n.slice(u*p,u*p+p).map((function(e){var t=e.id,a=e.city,n=e.coordinates,o=n.latitude,i=n.longitude,c=o?o.toFixed(2):null,l=i?i.toFixed(2):null;return r.a.createElement(pe.a,{hover:!0,role:"checkbox",tabIndex:-1,key:t},r.a.createElement(ue.a,{align:"left"},a),r.a.createElement(ue.a,{align:"right"},c),r.a.createElement(ue.a,{align:"right"},l))})),h>0&&r.a.createElement(pe.a,{style:{height:33*h}},r.a.createElement(ue.a,{colSpan:6}))))),r.a.createElement(de.a,{rowsPerPageOptions:[5,10,25],component:"div",count:n.length,rowsPerPage:p,page:u,onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){f(parseInt(e.target.value,10)),s(0)}})))})),we=Object(d.a)((function(e){return{modal:{display:"flex",justifyContent:"center",alignItems:"center",outline:"none"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Oe=function(e){console.log("props: ",e);var t=e.isOpen,a=e.hideHistory,n=we();return r.a.createElement(re.a,{"aria-labelledby":"History of cities","aria-describedby":"where user have been",open:t,onClose:a,closeAfterTransition:!0,BackdropComponent:oe.a,BackdropProps:{timeout:500},className:n.modal},r.a.createElement("div",null,r.a.createElement(xe,null)))},Te=Object(d.a)((function(e){var t;return{container:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"10px 10px 40px"},history:(t={display:"grid",gridTemplateColumns:"200px 200px 200px 200px",gridGap:"20px 20px"},Object(I.a)(t,"@media (max-width: 900px)",{gridTemplateColumns:"200px 200px"}),Object(I.a)(t,"&:hover",{cursor:"pointer"}),t),city:{position:"relative",height:100,color:e.palette.text.secondary,backgroundColor:e.palette.primary.light,opacity:.8,"&:hover":{opacity:1}},showHistory:{height:"100%"},deleteBtn:{position:"absolute",zIndex:1,top:5,right:5,backgroundColor:"transparent",boxShadow:"none","&:hover":{backgroundColor:"transparent",boxShadow:e.shadows[2]}},deleteAllBtn:{position:"absolute",zIndex:1,top:10,right:10}}})),je={deleteCityFromHistory:function(e){return function(e){return console.log("id: ",e),{type:"DELETE_CITY_FROM_HISTORY",id:e}}(e)},setEmptyHistory:function(){return{type:"CLEAR_HISTORY",history:[]}},setCoordinates:function(e){return T(e)}},ke=Object(c.b)((function(e){return{history:e.history}}),je)((function(e){var t=e.history,a=e.deleteCityFromHistory,o=e.setEmptyHistory,i=e.setCoordinates,c=Object(n.useState)(!1),u=Object(l.a)(c,2),s=u[0],m=u[1],d=Te(),p=t.length<8?t.slice():t.slice(0,7);p.reverse();return r.a.createElement("div",{className:d.container},r.a.createElement(B.a,{variant:"h2",component:"h2"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),r.a.createElement(G.a,{title:"Clear history","aria-label":"Clear history"},r.a.createElement(M.a,{color:"primary",className:d.deleteAllBtn,onClick:o},r.a.createElement(ne.a,null))),0===p.length?r.a.createElement(te.a,{severity:"info",variant:"outlined"},"\u0412\u0430\u0448\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0443\u0441\u0442\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0441\u0430\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e?"):r.a.createElement("div",{className:d.history},p.map((function(e){var t=e.id,n=e.city,o=e.color,c=e.coordinates;return r.a.createElement(Z.a,{key:t,className:d.city,style:{backgroundColor:o},onClick:function(){return function(e){i(e)}(c)}},r.a.createElement($.a,null,r.a.createElement(B.a,{variant:"body1",component:"p"},n)),r.a.createElement(ee.a,null,r.a.createElement(G.a,{title:"Delete ".concat(n),"aria-label":"Clear history"},r.a.createElement(M.a,{size:"small",className:d.deleteBtn,onClick:function(){return a(t.toString())}},r.a.createElement(ne.a,null)))))})),r.a.createElement(_.a,{variant:"contained",className:d.showHistory,onClick:function(){console.log("show history"),m(!s)}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e")),s?r.a.createElement(Oe,{isOpen:s,hideHistory:function(){return m(!1)}}):null)})),Ne=Object(d.a)((function(e){return{container:{padding:"10px 40px 40px"},weekDays:{display:"flex",flexWrap:"wrap"},day:{margin:e.spacing(1),minWidth:200,height:200,padding:20},temperature:{textAlign:"right"}}})),Ie={setNewCityToHistory:function(e){return j(e)}},Se=Object(c.b)((function(e){return{weatherWeek:e.weatherWeek}}),Ie)((function(e){var t=e.weatherWeek,a=Ne(),n=new Date,o=new Date(n.getTime()+864e5),i=new Date(n.getTime()+6048e5),c={day:"numeric",month:"long"},l=[];if(t)for(var u=1;u<8;u+=1){var s=new Date(n.getTime()+24*u*60*60*1e3),m=t.data[u],d=m.temperatureMin,p=m.temperatureMax,f=Math.floor((d+p)/2);l.push({weekDay:s.toLocaleDateString("ru-RU",{weekday:"long"}),date:s.toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),temperature:f})}return r.a.createElement("div",{className:a.container},r.a.createElement(B.a,{variant:"h2",component:"h2"},"\u041d\u0415\u0414\u0415\u041b\u042f"),r.a.createElement(B.a,{variant:"body1",component:"p"},"".concat(o.toLocaleDateString("ru-RU",c)," - ").concat(i.toLocaleDateString("ru-RU",c))),r.a.createElement("div",{className:a.weekDays},t?l.map((function(e){var t=e.weekDay,n=e.date,o=e.temperature,i=w(O(o));return r.a.createElement(he.a,{elevation:3,className:a.day,key:t},r.a.createElement(B.a,{variant:"h3",component:"h3"},n),r.a.createElement(B.a,{variant:"body2",component:"p"},t),r.a.createElement(B.a,{variant:"h1",component:"p",className:a.temperature},"".concat(i," \xb0C")))})):null))})),He=a(23),_e=a(34),Ae=(a(115),a(174)),Re=a(85),We=a.n(Re),De=Object(d.a)((function(e){return{marker:{transform:"translate(0, 0)"},user:{position:"relative",cursor:"pointer",outline:"none","& svg":{fill:e.palette.error.dark}},popup:{maxWidth:"70%",transform:"none","& h2":{margin:"0 0 10px 0"},"& p":{margin:0},"& .mapboxgl-popup-content":{minWidth:50,boxShadow:"2px 2px 10px rgba(0, 0, 0, .53)"}}}})),Le={setNewCityToHistory:function(e){return j(e)}},Ye=Object(c.b)((function(e){return{coordinates:e.coordinates,temperatureCurrent:e.temperature,city:e.city,country:e.country}}),Le)((function(e){var t=e.coordinates,a=e.temperatureCurrent,o=e.city,i=e.country,c=t.latitude,u=t.longitude,s=Object(n.useState)(!1),m=Object(l.a)(s,2),d=m[0],p=m[1],f=De();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:f.user,onClick:function(){return p(!d)},onKeyDown:function(){return p(!d)},role:"button",tabIndex:0},r.a.createElement(_e.c,{longitude:u,latitude:c,offsetLeft:-13,offsetTop:5},r.a.createElement(We.a,null))),d&&r.a.createElement(_e.d,{offsetLeft:0,offsetTop:27,latitude:c,longitude:u,onClose:function(){return p(!1)},closeOnClick:!1,closeButton:!0,anchor:"left",className:f.popup},r.a.createElement("div",null,r.a.createElement(B.a,{variant:"h3",component:"p"},"".concat(a," \xb0C")),r.a.createElement(B.a,{variant:"body2"},"".concat(o,", ").concat(i)))))})),ze=Object(d.a)((function(e){return{mapContainer:Object(I.a)({position:"relative",marginTop:"auto",width:"calc(100% - 420px)",textAlign:"right"},e.breakpoints.down("sm"),{width:"100%"}),mapControllers:{position:"absolute",top:0,left:0,width:"100%",zIndex:2,boxShadow:e.shadows[2]},btnGroupAndTheme:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",backgroundColor:e.palette.background.default},fullscreenControl:{position:"absolute",bottom:40,right:10},scaler:{position:"absolute",bottom:16,right:10},modalWrap:{width:"100vw",backgroundColor:"blue"},geolocateStyle:{position:"absolute",bottom:40,right:10}}})),Fe={setNewCityToHistory:function(e){return j(e)}},Be=Object(c.b)((function(e){return{coordinates:e.coordinates}}),Fe)((function(e){var t=e.coordinates,a=t.latitude,o=t.longitude,i=ze(),c=Object(n.useState)({width:650,height:400,latitude:a,longitude:o,zoom:7,bearing:0,pitch:0}),u=Object(l.a)(c,2),s=u[0],m=u[1];return Object(n.useEffect)((function(){!function(){var e=Object(He.a)({},s,{longitude:o,latitude:a,zoom:10,transitionDuration:"auto",transitionInterpolator:new _e.a,transitionEasing:Ae.a});m(e)}()}),[t,a,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"map-container",className:i.mapContainer},r.a.createElement(_e.f,Object.assign({},s,{onViewportChange:m,mapboxApiAccessToken:"pk.eyJ1IjoiYXlrdWxpIiwiYSI6ImNrM2pybXF5MjA0OWczcG14ZzdxNXBlYmMifQ.tYv6CcePP02kbiXAJ-p_Mw",mapStyle:"mapbox://styles/mapbox/".concat("streets-v11"),attributionControl:!0,width:"100%"}),r.a.createElement(Ye,null),r.a.createElement("div",{className:i.scaler},r.a.createElement(_e.e,{maxWidth:100,unit:"metric"})),r.a.createElement(_e.b,{className:i.geolocateStyle,positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}))))})),Ge=Object(d.a)((function(e){var t;return{container:(t={display:"flex",flexWrap:"wrap",alignItems:"flex-end",minHeight:550,padding:40},Object(I.a)(t,e.breakpoints.down("md"),{justifyContent:"center"}),Object(I.a)(t,"@media (max-width: 520px)",{padding:"20px 20px 40px"}),Object(I.a)(t,e.breakpoints.down("sm"),{padding:"10px 10px 40px"}),t),info:Object(I.a)({width:400,marginRight:20},e.breakpoints.down("sm"),{marginBottom:40,marginRight:0}),table:{minWidth:250,"& td, & td:last-child, & td:first-child":{padding:"5px 7px"},"& td, & th":{fontSize:"1rem"}},headRow:{backgroundColor:e.palette.primary.main},tableHeader:{color:e.palette.text.secondary}}})),Me={setNewCityToHistory:function(e){return j(e)}},Ue=Object(c.b)((function(e){return{weather48Hours:e.weather48Hours}}),Me)((function(e){var t=e.title,a=e.weather48Hours,n=Ge(),o=new Date,i=t===L[1]?o:new Date(o.getTime()+864e5),c=i.getDate(),l=i.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"});return r.a.createElement("div",{className:n.container},r.a.createElement("div",{className:n.info},r.a.createElement(B.a,{variant:"h2",component:"h2"},t),r.a.createElement(B.a,{variant:"body2",component:"p"},l),r.a.createElement(se.a,{component:he.a},r.a.createElement(ce.a,{className:n.table,size:"small","aria-label":"".concat(t," weather")},r.a.createElement(me.a,null,r.a.createElement(pe.a,{className:n.headRow},r.a.createElement(ue.a,{className:n.tableHeader},"\u0412\u0440\u0435\u043c\u044f"),r.a.createElement(ue.a,{className:n.tableHeader},"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"),r.a.createElement(ue.a,{className:n.tableHeader},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(ue.a,{className:n.tableHeader},"\u0412\u0435\u0442\u0435\u0440"))),r.a.createElement(le.a,null,a?a.data.map((function(e){var t,a=e.time,n=e.temperature,o=e.summary,i=e.windSpeed,l=new Date(1e3*a),u=c===l.getDate()&&l.getHours()%3===0,s=w(O(n)),m=O(i);return u?r.a.createElement(pe.a,{key:e.time},r.a.createElement(ue.a,null,"".concat((t=l.getHours(),t<10?"0".concat(t):t),": ").concat(l.getMinutes(),"0")),r.a.createElement(ue.a,null,"".concat(s," \xb0C")),r.a.createElement(ue.a,null,o),r.a.createElement(ue.a,null,"".concat(m," \u043c/\u0441"))):null})):null)))),r.a.createElement(Be,null))})),Pe=Object(d.a)((function(e){return{container:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:40,backgroundColor:"rgba(0, 0, 0, .5)",zIndex:5},msgWrap:{flexGrow:0,minWidth:200,minHeight:50,padding:20,backgroundColor:e.palette.primary.main,color:e.palette.text.secondary,border:"1px solid ".concat(e.palette.primary.dark),borderRadius:7,opacity:.8}}})),Xe=function(e){var t=e.msg,a=Pe();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.container},r.a.createElement("div",{className:a.msgWrap},t)))},Je=a(86),qe=a(87),Ke=a(90),Ve=a(91),Qe=a(88),Ze=a.n(Qe),$e=Object(d.a)((function(e){return{errorContainer:{display:"flex",flexGrow:0,flexDirection:"column",justifyContent:"center",maxWidth:400,padding:40,margin:"40px auto",backgroundColor:e.palette.background.default,border:"1px solid ".concat(e.palette.primary.dark),borderRadius:10,zIndex:5},titleWrap:{display:"flex",alignItems:"center",marginBottom:40},title:{margin:0,marginLeft:30,color:e.palette.primary.dark},info:{}}})),et=function(){var e=$e();return r.a.createElement("div",{className:e.errorContainer},r.a.createElement("div",{className:e.titleWrap},r.a.createElement(Ze.a,{color:"primary",fontSize:"large"}),r.a.createElement(B.a,{variant:"h1",className:e.title},"BOOM!")),r.a.createElement("div",{className:e.info},r.a.createElement(B.a,{variant:"body2"},"Something has gone terrribly wrong, but we already send droid to fix it.")))},tt=function(e){Object(Ve.a)(a,e);var t=Object(Ke.a)(a);function a(){var e;Object(Je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isWasError:!1},e}return Object(qe.a)(a,[{key:"componentDidCatch",value:function(){this.setState({isWasError:!0})}},{key:"render",value:function(){var e=this.state.isWasError,t=this.props.children;return e?r.a.createElement(et,null):t}}]),a}(n.Component),at=Object(d.a)((function(){return{container:{position:"relative",maxWidth:1200,height:"95%",margin:"20px auto",boxShadow:g.shadows[5]},sceleton:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:20},addBtn:{position:"absolute",top:70,right:10}}})),nt={setCoordinates:function(e){return T(e)},setCity:function(e){return{type:"CHANGE_CITY",city:e}},setCountry:function(e){return{type:"CHANGE_COUNTRY",country:e}},setWeatherInfo:function(e){return{type:"CHANGE_TODAY_WEATHER_INFO",weatherInfo:e}},setCurrentTemperature:function(e){return{type:"CHANGE_CURRENT_TEMPERATURE",temperature:e}},setWeather48hours:function(e){return{type:"CHANGE_WEATHER_FOR_NEXT_48_HOURS",weather48Hours:e}},setWeatherWeek:function(e){return{type:"CHANGE_WEEK_WEATHER",weatherWeek:e}}},rt=Object(c.b)((function(e){return{currentTab:e.currentTab,temperature:e.temperature,coordinates:e.coordinates}}),nt)((function(e){var t=e.temperature,a=e.currentTab,o=e.coordinates,i=e.setCoordinates,c=e.setCity,d=e.setCountry,p=e.setWeatherInfo,f=e.setCurrentTemperature,h=e.setWeather48hours,y=e.setWeatherWeek,b=at(),E=Object(n.useState)(!1),v=Object(l.a)(E,2),T=v[0],j=v[1],k=Object(n.useState)("\u0412\u0441\u0435 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!"),I=Object(l.a)(k,2),S=I[0],H=I[1];Object(n.useEffect)((function(){var e;return C().then((function(e){var t=e.latitude,a=e.longitude;i({latitude:t,longitude:a})})).catch((function(t){console.log("getCoordinates error: ",t),H("\u041a\u043e\u043e\u0440\u0438\u0434\u0430\u043d\u0442\u044b \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c. \u041c\u043e\u0436\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0437\u0430\u043f\u0440\u0435\u0442 \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u043f\u043e IP"),e=setTimeout((function(){j(!1)}),1e3)})),function(){clearTimeout(e)}}),[i,c,d,f,h,p,y]),Object(n.useEffect)((function(){var e,t=o.latitude,a=o.longitude;return t&&a?(function(e,t){return N.apply(this,arguments)}(t,a).then((function(e){var t=e.results[0].components,a=t.city,n=t.country;c(a),d(n),a&&window.history.pushState({page:a},a,"city=".concat(a))})).catch((function(t){console.log("reverseGeocoding error: ",t),j(!0),H("\u0421\u0435\u0440\u0432\u0438\u0441 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u041f\u0440\u043e\u0441\u0438\u043c \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),e=setTimeout((function(){j(!1)}),1e3)})),x(t,a,"ru").then((function(e){h(e.hourly),y(e.daily);var t=w(O(e.currently.temperature));f(t);var a=O(e.currently.windSpeed),n="".concat(e.currently.summary,", \u0412\u0435\u0442\u0435\u0440 - ").concat(a," \u043c/\u0441");p(n)})).catch((function(t){console.log("getWeatherByCoordinates error: ",t),j(!0),H("\u0421\u0435\u0440\u0432\u0438\u0441 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e\u0433\u043e\u0434\u044b \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u041f\u0440\u043e\u0441\u0438\u043c \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),e=setTimeout((function(){j(!1)}),1e3)}))):(H("\u0421\u0435\u0440\u0432\u0438\u0441 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u041f\u0440\u043e\u0441\u0438\u043c \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),e=setTimeout((function(){j(!1)}),1e3)),function(){clearTimeout(e)}}),[o,c,d,f,h,p,y]);var _=new Map;return _.set(L[0],r.a.createElement(ke,null)),_.set(L[1],r.a.createElement(Ue,{title:L[1]})),_.set(L[2],r.a.createElement(Ue,{title:L[2]})),_.set(L[3],r.a.createElement(Se,null)),r.a.createElement(u.a,{theme:g},r.a.createElement(tt,null,r.a.createElement(s.a,null),T?r.a.createElement(Xe,{msg:S}):null,r.a.createElement("div",{className:b.container},r.a.createElement(F,null),null===t?r.a.createElement("div",{className:b.sceleton},r.a.createElement(m.a,{variant:"circle",width:50,height:50,className:b.addBtn}),r.a.createElement(m.a,{variant:"text",width:50,height:70}),r.a.createElement(m.a,{variant:"text",width:300,height:50}),r.a.createElement(m.a,{variant:"rect",width:300,height:118})):r.a.createElement(Q,null),_.get(a))))})),ot=a(44),it=a(62),ct=localStorage.getItem("CITIES_LIST"),lt=null===ct?[{id:"aaa-AAA_999999:0",city:"\u0411\u0430\u0440\u043d\u0430\u0443\u043b",coordinates:{latitude:53.3606,longitude:83.7636},color:"#FFAA22"},{id:"aaa-AAA_999999:1",city:"\u041c\u043e\u0441\u043a\u0432\u0430",coordinates:{latitude:55.7504461,longitude:37.6174943},color:"#55AA22"},{id:"aaa-AAA_999999:2",city:"\u041a\u0440\u0430\u0441\u043d\u043e\u044f\u0440\u0441\u043a",coordinates:{latitude:56.0090968,longitude:92.8725147},color:"#BBAA22"}]:JSON.parse(ct),ut={currentTab:L[0],coordinates:{latitude:0,longitude:0},city:"",country:"",temperature:null,weatherInfo:"",weather48Hours:null,weatherWeek:null,history:lt},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REFRESH_COORDINATES":return Object(He.a)({},e,{coordinates:t.coordinates});case"CHANGE_CURRENT_TAB":return Object(He.a)({},e,{currentTab:t.currentTab});case"CHANGE_CITY":return Object(He.a)({},e,{city:t.city});case"CHANGE_COUNTRY":return Object(He.a)({},e,{country:t.country});case"CHANGE_TODAY_WEATHER_INFO":return Object(He.a)({},e,{weatherInfo:t.weatherInfo});case"CHANGE_CURRENT_TEMPERATURE":return Object(He.a)({},e,{temperature:t.temperature});case"CHANGE_WEATHER_FOR_NEXT_48_HOURS":return Object(He.a)({},e,{weather48Hours:t.weather48Hours});case"CHANGE_WEEK_WEATHER":return Object(He.a)({},e,{weatherWeek:t.weatherWeek});case"ADD_CITY_TO_HISTORY":return Object(He.a)({},e,{history:[].concat(Object(it.a)(e.history),[t.history])});case"DELETE_CITY_FROM_HISTORY":return Object(He.a)({},e,{history:e.history.filter((function(e){return e.id!==t.id}))});case"CLEAR_HISTORY":return Object(He.a)({},e,{history:[]});default:return e}},mt=function(){return function(e){return function(t){if("ADD_CITY_TO_HISTORY"===t.type){var a=pt.getState(),n=[].concat(Object(it.a)(a.history),[t.history]);localStorage.removeItem("CITIES_LIST"),localStorage.setItem("CITIES_LIST",JSON.stringify(n))}if("CLEAR_HISTORY"===t.type&&localStorage.removeItem("CITIES_LIST"),"DELETE_CITY_FROM_HISTORY"===t.type){var r=pt.getState().history.filter((function(e){return e.id!==t.id}));localStorage.removeItem("CITIES_LIST"),localStorage.setItem("CITIES_LIST",JSON.stringify(r))}return e(t)}}},dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ot.c,pt=Object(ot.d)(st,dt(Object(ot.a)(mt)));i.a.render(r.a.createElement(c.a,{store:pt},r.a.createElement(rt,null)),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.156effe4.chunk.js.map